<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The Qubist Movie Tool</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,frames,3 --> 
<meta name="src" content="QubistHTML.tex"> 
<meta name="date" content="2012-02-01 01:22:00"> 
<link rel="stylesheet" type="text/css" href="QubistHTML.css"> 
</head><body 
>
<!--l. 8097--><div class="crosslinks"><p class="noindent">[<a 
href="QubistHTMLse98.html" >prev</a>] [<a 
href="QubistHTMLse98.html#tailQubistHTMLse98.html" >prev-tail</a>] [<a 
href="#tailQubistHTMLse99.html">tail</a>] [<a 
href="QubistHTMLch12.html#QubistHTMLse99.html" >up</a>] </p></div>
<h3 class="sectionHead"><span class="titlemark">12.6   </span> <a 
 id="x133-22000012.6"></a>The Qubist Movie Tool</h3>
<a 
 id="dx133-220001"></a>
<a 
 id="dx133-220002"></a>
<a 
 id="dx133-220003"></a>
<!--l. 8103--><p class="noindent" >I have often found it useful to show movies of Ferret runs when giving seminars. I find this especially effective
when discussing the code with audiences who are unfamiliar with evolutionary computing ideas, which
is a fair description of just about every scientific audience that I have ever spoken to. Section <a 
href="QubistHTMLse23.html#x40-580004.13">4.13<!--tex4ht:ref: sec:movies --></a>
discussed a simple technique for generating .avi movies from an active Ferret window. This section
introduces the Qubist Movie Tool, which allows you to generate movies of Ferret runs (and other
image data) with somewhat greater flexibility, and without having the Ferret window from your run
active.
<a 
 id="dx133-220004"></a>
<!--l. 8106--><p class="noindent" >MATLAB contains useful built-in features for generating movies, and I have automated the use of these features in
Qubist&#8217;s Movie Tool, which is designed to make it easy to generate movies from frames that are saved as Ferret
runs. Unfortunately, the tool only works with Ferret at this time, but it is likely that I will add support for at least
Locust in the near future. Note that the Movie Tool can also stitch together other sequentially numbered image files
(i.e. pic_1.jpg, pic_2.jpg, pic_3.jpg, etc.) in a directory, in any format that can be read with MATLAB&#8217;s &#8216;imread&#8217;
command.
<!--l. 8109--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.6.1   </span> <a 
 id="x133-22100012.6.1"></a>Running the Movie Tool</h4>
<a 
 id="dx133-221001"></a>
<a 
 id="dx133-221002"></a>
<!--l. 8114--><p class="noindent" >Figure <a 
href="#x133-2210033">12.3<!--tex4ht:ref: fig:movieTool --></a> shows a snapshot of the Qubist Movie Tool. To use the tool on frames saved by a Ferret run, you
should first ensure that you have added a line <span 
class="cmtt-10">par.movie.makeMovie=true </span>to your setup file <span 
class="cmti-10">before</span>
running Ferret. This will cause Ferret to automatically save a movie frame each generation in the
&#8216;movieFrames&#8217; folder of the run&#8217;s data directory. Click on &#8216;Select First Frame&#8217;, navigate to the &#8216;movieFrames&#8217;
directory inside of the data directory for your project, and select the first frame of your movie. If
you discover that the movieFrames directory is empty, then you probably forgot to include the line
<span 
class="cmtt-10">par.movie.makeMovie=true </span>in your setup file, and you will have to generate your movie from History files
instead.
<!--l. 8116--><p class="noindent" >The Qubist Movie Tool can load History files, which is especially useful if you want to generate a movie from a run
that did not save any frames (<span 
class="cmtt-10">par.movie.makeMovie=false</span>). To use this feature, just navigate to the History
directory and load the first History file. This will cause Ferret to re-generate its console window for each generation
                                                                                         

                                                                                         
from the saved History information, take a snapshot, and save the snapshots as the frames of a movie. Several
simple extra steps will be required to set the desired view and ensure that the &#8216;User Plot&#8217; window works, as
discussed in Section <a 
href="#x133-22200012.6.2">12.6.2<!--tex4ht:ref: sec:HistoryMovies --></a>.
<!--l. 8118--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                         

                                                                                         
<a 
 id="x133-2210033"></a>
                                                                                         

                                                                                         
<div class="center" 
>
<!--l. 8119--><p class="noindent" >

<!--l. 8120--><p class="noindent" ><img 
src="figures/movieTool/movieTool.png" alt="PIC"  
></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.3: </span><span  
class="content">The Qubist Movie Tool.</span></div><!--tex4ht:label?: x133-2210033 -->
                                                                                         

                                                                                         
<!--l. 8124--><p class="noindent" ></div><hr class="endfigure">
<a 
 id="dx133-221004"></a>
<a 
 id="dx133-221005"></a>
<a 
 id="dx133-221006"></a>
<a 
 id="dx133-221007"></a>
<!--l. 8130--><p class="noindent" >Choose a compressor for your project using the drop-down menu in the Movie Tool. Only compressors supported by
MATLAB on your system will be displayed. For example, my MacIntosh doesn&#8217;t support any compressors, so the
only compressor option is &#8216;none&#8217;. On the other hand, my Windows computer shows several options to choose from.
Let me say at this point that I am definitely not an expert on video formats, and chances are good that many
readers will know a lot more about this topic than I do. I cannot recommend one video format over another,
and frankly, I&#8217;ve often had to mess around with multiple formats to generate a working movie. My
advice is to either consult a video expert or the MathWorks about this topic, or take my approach and
play around with different compressors (and possibly different system architectures) to get this to
work. Hopefully, you will be able to find a compressor that works on your system and with your AVI
player.
<a 
 id="dx133-221008"></a>
<a 
 id="dx133-221009"></a>
<!--l. 8134--><p class="noindent" >There is a slider on the Movie Tool that allows you to select the frame rate in frames per second. Anecdotally, this
option is actually the reason that the Movie Tool exists. I had set <span 
class="cmtt-10">par.movie.makeMovie=true </span>in my project, which
causes Ferret to generate an AVI movie automatically at the end of the run, but I was annoyed to discover that the
frame rate was too fast for my presentation, and there was no time to re-run the project. I quickly hacked together a
short program to re-load the frames and regenerate the movie with a more suitable frame rate. A few days
later, I wrapped this program in a nice user interface, and the first version of the Movie Tool was
born.
<a 
 id="dx133-221010"></a>
<a 
 id="dx133-221011"></a>
<!--l. 8138--><p class="noindent" >A second slider allows you to select the quality of the movie, which is a number ranging from 10 to 100. Higher
quality numbers correspond to larger files and nicer looking movies. I normally select the maximum value of
100.
<!--l. 8140--><p class="noindent" >Finally, make your movie by clicking the &#8216;Generate Movie&#8217; button. It should appear in the project&#8217;s data directory,
alongside the OptimalSolutions.mat file, with a name derived from the name of the movie frame directory. For
example, if your movie frame directory is called &#8216;movieFrames&#8217; (Ferret&#8217;s default), then your movie will be called
&#8216;movieFrames.avi&#8217;. You should see a message indicating that your movie was generated successfully and its location
on your disk.
<!--l. 8142--><p class="noindent" >If your movie does not look the way you want, just change the compressor, frame rate, and quality settings and try
again. The Movie Tool <span 
class="cmti-10">should </span>be able to delete the old movie file and replace it with the new, modified one.
However, this has been problematic on occasion, especially on Windows computers. If you see an error
message about not being able to write the movie file, you may need to delete the old file manually before
continuing.
<a 
 id="dx133-221012"></a>
<a 
 id="dx133-221013"></a>
<h4 class="subsectionHead"><span class="titlemark">12.6.2   </span> <a 
 id="x133-22200012.6.2"></a>Making Movies from History Files</h4>
                                                                                         

                                                                                         
<a 
 id="dx133-222001"></a>
<a 
 id="dx133-222002"></a>
<!--l. 8153--><p class="noindent" >A few extra steps are required after clicking the &#8216;Generate Movie&#8217; button if you are using the Movie Tool to generate
movies from History files rather than saved frames. These steps are as follows:
<!--l. 8155--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x133-222004x1">
     You
     will
     be
     asked
     to
     choose
     the
     project
     directory,
     which
     is
     the
     directory
     that
     contains
     your
     fitness
     function.
     Navigate
     to
     your
     project
     directory
     and
     click
     &#8216;Open&#8217;.
     The
     Movie
     Tool
     should
     make
     a
     reasonable
     guess
     about
     the
     location
     of
                                                                                         

                                                                                         
     your
     project
     directory,
     as
     long
     as
     you
     have
     not
     moved
     your
     files
     since
     the
     run
     was
     done.
     This
     step
     is
     required
     only
     to
     provide
     paths
     for
     your
     &#8216;myPlot&#8217;
     function
     (see
     Section
     <a 
href="QubistHTMLse20.html#x36-550004.10">4.10<!--tex4ht:ref: sec:myPlot --></a>),
     which
     will
     be
     called
     (if
     it
     exists)
     while
     Movie
     Tool
     generates
     frames.
     If
     you
     don&#8217;t
     have
                                                                                         

                                                                                         
     a
     myPlot
     function
     or
     don&#8217;t
     care
     if
     it
     is
     included
     in
     your
     movie,
     then
     you
     can
     skip
     this
     step
     by
     clicking
     &#8216;Cancel&#8217;.
     The
     Ferret
     console
     window
     will
     open.
     </li>
     <li 
  class="enumerate" id="x133-222006x2">
     You
     will
     be
     asked
     if
     you
     want
     to
     execute
     your
     init
     file
     or
     another
     file
     that
                                                                                         

                                                                                         
     loads
     paths.
     This
     is
     also
     done
     to
     ensure
     that
     the
     Movie
     Tool
     has
     all
     of
     the
     path
     information
     that
     it
     needs
     to
     execute
     your
     myPlot
     function.
     Click
     &#8216;Yes&#8217;
     and
     navigate
     to
     your
     path-loading
     file
     if
     you
     have
     one,
     or
     click
     &#8216;Cancel&#8217;
     if
     you
     don&#8217;t
     need
     to
     do
     this.
                                                                                         

                                                                                         
     </li>
     <li 
  class="enumerate" id="x133-222008x3">
     You
     will
     be
     presented
     with
     a
     message
     box
     asking
     you
     to
     &#8216;Set
     the
     desired
     view
     and
     click
     &#8216;OK&#8217;
     to
     start
     capturing
     frames.&#8217;
     At
     this
     point,
     most
     of
     the
     controls
     on
     the
     Ferret
     Console
     window
     will
     be
     active
     and
     you
     can
     set
     your
     axes
     to
     the
                                                                                         

                                                                                         
     desired
     projection,
     select
     whether
     you
     want
     to
     see
     the
     &#8216;Linkage&#8217;,
     &#8216;C.P.D.
     Plot&#8217;,
     or
     &#8216;User
     Plot&#8217;
     view
     (Usually
     the
     User
     Plot
     is
     most
     informative
     for
     movies,
     if
     you
     have
     written
     a
     good
     myPlot
     function),
     and
     even
     select
     which
     file
     you
     want
     to
     display
     in
     the
     &#8216;Project
     Notes/Info&#8217;
     box.
     Set
                                                                                         

                                                                                         
     your
     desired
     view
     and
     click
     &#8216;OK&#8217;
     to
     start
     capturing
     frames.
     Let
     this
     run
     until
     the
     end
     of
     the
     run
     is
     reached,
     or
     you
     can
     stop
     it
     prematurely
     by
     clicking
     the
     &#8216;Stop
     Run&#8217;
     button.
     You
     should
     get
     the
     usual
     message
     that
     your
     movie
     has
     been
     successfully
     generated
     and
     the
                                                                                         

                                                                                         
     name
     of
     the
     file
     that
     was
     saved.</li></ol>
<a 
 id="dx133-222009"></a>
<a 
 id="dx133-222010"></a>
<a 
 id="dx133-222011"></a>
<a 
 id="dx133-222012"></a>
<a 
 id="dx133-222013"></a>
<a 
 id="dx133-222014"></a>
                                                                                         

                                                                                         
<!--l. 8170--><div class="crosslinks"><p class="noindent">[<a 
href="QubistHTMLse98.html" >prev</a>] [<a 
href="QubistHTMLse98.html#tailQubistHTMLse98.html" >prev-tail</a>] [<a 
href="QubistHTMLse99.html" >front</a>] [<a 
href="QubistHTMLch12.html#QubistHTMLse99.html" >up</a>] </p></div>
<!--l. 8170--><p class="noindent" ><a 
 id="tailQubistHTMLse99.html"></a>  
</body></html> 
